<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>
<h:body>
	<ui:composition xmlns="http://www.w3.org/1999/xhtml"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:h="http://xmlns.jcp.org/jsf/html"
		xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
		xmlns:p="http://primefaces.org/ui">

		<h:form id="listForm">
			<p:blockUI block="entirePage" widgetVar="bui" />
			<div>
				<p:messages id="messagesBatch" showDetail="true" />
			</div>
			<div>
				<p:dataTable id="listTable" var="item"
					value="#{rutasController.items}"
					selection="#{rutasController.selectedItems}"
					rowKey="#{item.ruta.id}" reflow="true" rows="5" paginator="true"
					sortMode="multiple">

					<f:facet name="header">
						<p:toolbar id="toolbarHeader">
							<ui:include src="/rutas/body-list-toolbar.xhtml" />
						</p:toolbar>
					</f:facet>

					<f:facet name="footer">
						<p:toolbar id="toolbarFooter">
							<ui:include src="/rutas/body-list-toolbar.xhtml" />
						</p:toolbar>
					</f:facet>

					<p:ajax event="rowSelect" update="toolbarHeader toolbarFooter" />
					<p:ajax event="rowUnselect" update="toolbarHeader toolbarFooter" />
					<p:ajax event="rowSelectCheckbox"
						update="toolbarHeader toolbarFooter" />
					<p:ajax event="rowUnselectCheckbox"
						update="toolbarHeader toolbarFooter" />

					<p:column selectionMode="multiple"
						style="width:16px;text-align:center" />

					<p:column headerText="ID" sortable="true" style="text-align: right"
						visible="false">
						<h:outputText value="#{item.ruta.id}" />
					</p:column>
					<p:column headerText="CÓDIGO" sortBy="#{item.ruta.codigo}"
						filterBy="#{item.ruta.codigo}">
						<h:outputText value="#{item.ruta.codigo}" />
					</p:column>
					<p:column headerText="DESCRIPCIÓN"
						sortBy="#{item.ruta.descripcion}"
						filterBy="#{item.ruta.descripcion}">
						<h:outputText value="#{item.ruta.descripcion}" />
					</p:column>
					<p:column headerText="CONDUCTOR"
						sortBy="#{item.ruta.conductorNombres}"
						filterBy="#{item.ruta.conductorNombres}">
						<h:outputText value="#{item.ruta.conductorNombres}" />
					</p:column>
					<p:column headerText="MONITOR" sortBy="#{item.nombreMonitor}"
						filterBy="#{item.nombreMonitor}">
						<h:outputText value="#{item.nombreMonitor}" />
					</p:column>
					<p:column headerText="CAPACIDAD MAX"
						sortBy="#{item.ruta.capacidadMaxima}"
						filterBy="#{item.ruta.capacidadMaxima}">
						<h:outputText value="#{item.ruta.capacidadMaxima}" />
					</p:column>
					<p:column headerText="INSCRITOS" sortBy="#{item.inscritos}"
						filterBy="#{item.inscritos}">
						<h:outputText value="#{item.inscritos}" />
					</p:column>
					<p:column headerText="OPCIONES" style="text-align: center">
						<p:commandButton value="Asignar" icon="fa fa-users"
							actionListener="#{rutasController.assignListener(item)}"
							update="assignDialog" onclick="PF('bui').show()"
							oncomplete="PF('assignDialog').show();PF('bui').hide()"
							resetValues="true" />
					</p:column>
				</p:dataTable>
			</div>
			<div class="footer-commands-container">
				<div class="footer-commands-content" />
			</div>
		</h:form>
	</ui:composition>
</h:body>
</html>