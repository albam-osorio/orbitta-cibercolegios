<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<p:dialog id="assignDialog" widgetVar="assignDialog" modal="true"
		showEffect="fade" hideEffect="fade" resizable="false" closable="false"
		width="850">
		<h:form id="assignForm">
			<h:panelGroup rendered="#{rutasDialogAssignController.initialized}">

				<div class="body-container">
					<div class="header-title-container">
						<div class="header-title">
							<h:outputText value="ASIGNACIÓN DE PASAJEROS A RUTAS" />
						</div>
					</div>
					<div class="header-subtitle-container">
						<h:outputText value="MIEMBROS DE LA RUTA" />
					</div>
					<div class="body-container">

						<p:scrollPanel mode="native" style="width:800px;height:400px;">
							<p:panel
								style="width:780px;height:390px;overflow:auto !important">

								<p:focus />
								<div class="ui-g">
									<p:messages id="assignDialogMensajes" showDetail="false"
										closable="true" globalOnly="true" />
								</div>
								<div class="ui-g">
									<div class="ui-g-2">
										<h:outputText value="CÓDIGO" />
									</div>
									<div class="ui-g-1">
										<h:outputText
											value="#{rutasDialogAssignController.model.ruta.codigo}" />
									</div>
									<div class="ui-g-3"></div>
									<div class="ui-g-2">
										<h:outputText value="MONITOR" />
									</div>
									<div class="ui-g-4">
										<h:outputText
											value="#{rutasDialogAssignController.model.nombreMonitor}" />
									</div>
								</div>
								<div class="ui-g">
									<div class="ui-g-2">
										<h:outputText value="DESCRIPCIÓN" />
									</div>
									<div class="ui-g-4">
										<h:outputText
											value="#{rutasDialogAssignController.model.ruta.descripcion}" />
									</div>
									<div class="ui-g-2">
										<h:outputText value="CAPACIDAD MAX" />
									</div>
									<div class="ui-g-1">
										<h:outputText
											value="#{rutasDialogAssignController.model.ruta.capacidadMaxima}" />
										Cupos
									</div>
									<div class="ui-g-2">
										<h:outputText value="INSCRITOS" />
									</div>
									<div class="ui-g-1">
										<h:outputText id="inscritos"
											value="#{rutasDialogAssignController.inscritos.size()}" />
										Inscritos
									</div>
								</div>
								<div class="ui-g">
									<div class="ui-g-12"></div>
								</div>
								<div class="ui-g">
									<div class="ui-g-4">
										<p:outputLabel value="Nivel académico" />
									</div>
									<div class="ui-g-4">
										<p:outputLabel value="Programa académico" />
									</div>
									<div class="ui-g-4">
										<p:outputLabel value="Grado" />
									</div>
								</div>
								<div class="ui-g">
									<div class="ui-g-4">
										<p:selectOneMenu id="niveles"
											value="#{rutasDialogAssignController.nivelId}" filter="true"
											filterMatchMode="startsWith" style="width:10em;">
											<p:ajax
												listener="#{rutasDialogAssignController.onChangeNivelAcademico}"
												process="@this" update="programas grados estudiantesGroup" />
											<f:selectItem noSelectionOption="true" itemLabel="" />
											<f:selectItems value="#{rutasDialogAssignController.niveles}"
												var="nivel" itemValue="#{nivel.id}"
												itemLabel="#{nivel.descripcion}" />
										</p:selectOneMenu>
									</div>
									<div class="ui-g-4">
										<p:selectOneMenu id="programas"
											value="#{rutasDialogAssignController.programaId}"
											filter="true" filterMatchMode="startsWith"
											style="width:10em;">
											<p:ajax
												listener="#{rutasDialogAssignController.onChangePrograma}"
												process="@this" update=" grados estudiantesGroup" />
											<f:selectItem noSelectionOption="true" itemLabel="" />
											<f:selectItems
												value="#{rutasDialogAssignController.programas}" />
										</p:selectOneMenu>
									</div>
									<div class="ui-g-4">
										<p:selectOneMenu id="grados"
											value="#{rutasDialogAssignController.gradoId}" filter="true"
											filterMatchMode="startsWith" style="width:10em;">
											<p:ajax
												listener="#{rutasDialogAssignController.onChangeGrado}"
												process="@this" update=" estudiantesGroup" />
											<f:selectItem noSelectionOption="true" itemLabel="" />
											<f:selectItems value="#{rutasDialogAssignController.grados}" />
										</p:selectOneMenu>
									</div>
								</div>
								<div class="ui-g">
									<div class="ui-g-12">
										<p:separator />
									</div>
								</div>

								<div class="ui-g">
									<div class="ui-g-12">
										<h:panelGroup id="estudiantesGroup">
											<p:pickList id="pickList"
												value="#{rutasDialogAssignController.dualListModel}"
												var="item" itemValue="#{item}"
												itemLabel="#{item.nombreEstudiante}"
												showSourceControls="true" showTargetControls="true"
												showSourceFilter="true" showTargetFilter="true"
												filterMatchMode="contains"
												converter="pasajeroPickListConverter" responsive="true">

												<f:facet name="sourceCaption">No inscritos</f:facet>
												<f:facet name="targetCaption">Inscritos</f:facet>

												<p:ajax event="transfer"
													listener="#{rutasDialogAssignController.onTransfer}"
													update="pickList" />
												<p:ajax event="reorder"
													listener="#{rutasDialogAssignController.onReorder}"
													update="pickList" />

											</p:pickList>
										</h:panelGroup>
									</div>
								</div>
							</p:panel>
						</p:scrollPanel>

					</div>
					<div class="footer-commands-container">
						<div class="footer-commands-content">
							<p:commandButton value="Actualizar"
								actionListener="#{rutasDialogAssignController.submit()}"
								process="@form" action="#{rutasCrudController.find()}"
								update=" :assignForm :assignForm:assignDialogMensajes listForm">
							</p:commandButton>
							<p:commandButton value="Cancelar"
								actionListener="#{rutasDialogAssignController.closeDialog()}"
								process="@this" oncomplete="PF('bui').hide()"
								update=" :assignForm" />
						</div>
					</div>
				</div>

			</h:panelGroup>
		</h:form>
	</p:dialog>
</ui:composition>
